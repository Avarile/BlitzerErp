{"version":3,"file":"static/js/907.f5fd7840.chunk.js","mappings":"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","sources":["components/Fabrication/SingleFabJobInList.Module.tsx","pages/FabricationIndex.tsx"],"sourcesContent":["import React from \"react\";\nimport { Steps, Button, message, Input } from \"antd\";\nimport styled from \"styled-components\";\nimport { LoadingOutlined, PayCircleOutlined } from \"@ant-design/icons\";\nimport { updateOrderForFabrication } from \"@SRC/data/api.service\";\n\nconst { TextArea } = Input;\nconst { Step } = Steps;\n\nconst steps = [\n  {\n    id: 0,\n    title: \"Waiting For Material\",\n    content: \"Shortage of Material, waiting for resupply\",\n    subtitle: \"Contact factory to resupply\",\n    percent: \"0%\",\n    value: \"pending\",\n  },\n  {\n    id: 1,\n    title: \"Machining items\",\n    content: \"During machining procedures\",\n    subtitle: \"Items is in the workshop\",\n    percent: \"15%\",\n    value: \"machineProcessing\",\n  },\n  {\n    id: 2,\n    title: \"Machine Finished\",\n    content: \"Ready for next procedure\",\n    subtitle: \"Items is in the workshop\",\n    percent: \"30%\",\n    value: \"machineProcessFinished\",\n  },\n  {\n    id: 3,\n    title: \"PowderCoating\",\n    content: \"During PowderCoating procedures, Normally this took 2~3 weeks\",\n    subtitle: \"Items is in the PowderCoating Factory\",\n    percent: \"45%\",\n    value: \"powderCoating\",\n  },\n  {\n    id: 4,\n    title: \"PowderCoating Finished\",\n    content: \"Ready for next procedure\",\n    subtitle: \"Items return from the factory to the workshop\",\n    percent: \"70%\",\n    value: \"powderCoatingFinished\",\n  },\n  {\n    id: 5,\n    title: \"Waiting for Installation\",\n    content: \"Contact clients to book in!\",\n    subtitle: \"Items is in the workshop, wainting to be installed\",\n    percent: \"85%\",\n    value: \"waitingForInstallation\",\n  },\n  {\n    id: 6,\n    title: \"Installing\",\n    content: \"During Installation procedures, Installation normally took 2days\",\n    subtitle: \"Installation\",\n    percent: \"90%\",\n    value: \"installing\",\n  },\n  {\n    id: 7,\n    title: \"Ready\",\n    content: \"Ready for pickup\",\n    subtitle: \"Everything is ready\",\n    percent: \"100%\",\n    value: \"ready\",\n  },\n];\n\nexport default function SingleFabJobInListModule({ order, getOrderByIdandSetdata }: any) {\n  const getCurrentFabIdOutofOrder = (): number => {\n    let id = 0;\n    for (let item of steps) {\n      if (item.value === order.fabricationStatus) {\n        id = item.id;\n        return id;\n      }\n    }\n    return id;\n  };\n\n  const [current, setCurrent] = React.useState<number>(getCurrentFabIdOutofOrder());\n  const [fabricationInfo, setFabricationInfo] = React.useState<string>(order.fabricationInfo);\n\n  const next = () => {\n    setCurrent(current + 1);\n  };\n\n  const prev = () => {\n    setCurrent(current - 1);\n  };\n\n  const updateFabStatus = async () => {\n    let payload = {\n      ...order,\n      fabricationStatus: steps[current].value,\n      fabricationInfo: fabricationInfo,\n    };\n    await updateOrderForFabrication(order.id, payload).then(getOrderByIdandSetdata());\n  };\n\n  return (\n    <>\n      <Steps current={current} size=\"small\">\n        {steps.map((item) => (\n          <Step key={item.title} title={item.title} description={item.subtitle} icon={current === item.id && <LoadingOutlined />} />\n        ))}\n      </Steps>\n      <StepContent>\n        <TextAreaContainer>\n          <TextAreaNew\n            autoSize={{ minRows: 20, maxRows: 10 }}\n            showCount\n            maxLength={2000}\n            rows={20}\n            value={fabricationInfo}\n            onChange={(event) => {\n              setFabricationInfo(event.target.value);\n            }}\n          />\n        </TextAreaContainer>\n        <TextAreaContainer>\n          <TextAreaNew autoSize={{ minRows: 20, maxRows: 10 }} rows={20} maxLength={2000} value={steps[current].content} showCount />\n        </TextAreaContainer>\n      </StepContent>\n      <StepAction>\n        {current < steps.length - 1 && (\n          <Button type=\"primary\" onClick={() => next()} style={{ width: \"6rem\" }}>\n            Next\n          </Button>\n        )}\n        {current === steps.length - 1 && (\n          <Button type=\"primary\" onClick={() => message.success(\"Processing complete!\")} style={{ width: \"6rem\" }}>\n            Production Finished\n          </Button>\n        )}\n        {current > 0 && (\n          <Button style={{ margin: \"0 8px\", width: \"6rem\" }} onClick={() => prev()}>\n            Previous\n          </Button>\n        )}\n        <Button\n          danger\n          type=\"primary\"\n          style={{ margin: \"0 8px\" }}\n          onClick={() => {\n            updateFabStatus();\n          }}>\n          Comfirm Status Change\n        </Button>\n      </StepAction>\n    </>\n  );\n}\n\nconst StepContent = styled.div`\n  min-height: 200px;\n  margin-top: 16px;\n  background-color: #fafafa;\n  border: 1px dashed #e9e9e9;\n  border-radius: 2px;\n  display: grid;\n  grid-template-columns: 2fr 3fr;\n  grid-template-rows: 1fr;\n  grid-column-gap: 10px;\n  grid-row-gap: 0px;\n`;\n\nconst StepAction = styled.div`\n  margin-top: 24px;\n`;\n\nconst TextAreaContainer = styled.div``;\n\nconst TextAreaNew = styled(TextArea)`\n  flex: 0 1 auto;\n  margin: 2rem;\n  width: 90%;\n  height: 200;\n  align-items: center;\n  resize: none;\n`;\n\nconst DisplayContentContainer = styled.p`\n  margin: 2rem;\n`;\n","import { Table, Input, Badge } from \"antd\";\nimport \"@SRC/pages/pages.css\";\nimport { fabricationStatusIndicator } from \"@SRC/utils/utilFuncs\";\nimport SingleFabJobInListModule from \"@SRC/components/Fabrication/SingleFabJobInList.Module\";\nimport { getOrdersById, updateOrderForFabrication } from \"@SRC/data/api.service\";\nimport React, { useState, useEffect } from \"react\";\n\nconst { Search } = Input;\n\nconst columns = [\n  { title: \"Order Number\", dataIndex: \"id\", key: \"orderNumber\" },\n  { title: \"OrderAmount\", dataIndex: \"pricetotalAmount\", key: \"orderAmount\" },\n  {\n    title: \"Balance Due\",\n    dataIndex: \"balanceDue\",\n    key: \"balanceDue\",\n  },\n  {\n    title: \"Fabrication Status\",\n    dataIndex: \"fabricationStatus\",\n    key: \"fabricationStatus\",\n    render: (currentRowValue: any, currentColumnValue: any, index: number) => (\n      <span>\n        <Badge status={fabricationStatusIndicator(currentRowValue)} />\n        {currentRowValue}\n      </span>\n    ),\n  },\n];\n\nconst FabricationIndex = () => {\n  const [data, setData] = useState<any>([]);\n  const [searchParams, setSearchParams] = useState<any>({ orderId: \"\" });\n  const [loadingStatus, setLoadingState] = useState(false);\n  // const [loadingStatus, setLoadingStatus] = useState<boolean>(false); // I use this as a triggger to refresh the component if I updated the Amount payed, that's why I did the prop drilling\n\n  const getOrderByIdandSetdata = () => {\n    setLoadingState(true);\n    getOrdersById(searchParams)\n      .then((response: any) => {\n        setData(response);\n      })\n      .finally(() => {\n        setTimeout(() => {\n          setLoadingState(false);\n        }, 1000);\n      });\n  };\n  useEffect(() => {\n    getOrderByIdandSetdata();\n  }, [searchParams]);\n  // console.log(data);\n\n  return (\n    <>\n      {/* <h3>Fabrication Page</h3> */}\n      <div style={{ width: \"100%\", display: \"flex\", flexDirection: \"column\" }}>\n        <Search\n          style={{ minWidth: \"15rem\", maxWidth: \"20rem\", marginBottom: \"5rem\", alignSelf: \"flex-end\", marginRight: \"8rem\" }}\n          enterButton=\"search by OrderId\"\n          allowClear\n          loading={false}\n          onSearch={(value) => {\n            setSearchParams(value);\n          }}\n        />{\" \"}\n        <h3>Order Fabrication Status</h3>\n        <Table\n          rowKey={\"id\"}\n          loading={loadingStatus}\n          rowClassName={(record, index) => {\n            if (index % 2 === 0) {\n              return \"warehousing-oddRow\";\n            } else return \"warehousing-evenRow\";\n          }}\n          columns={columns}\n          expandable={{\n            expandedRowRender: (record) => <SingleFabJobInListModule order={record} getOrderByIdandSetdata={getOrderByIdandSetdata} />,\n            // rowExpandable: (record) => record.name !== \"Not Expandable\",\n          }}\n          dataSource={data}\n        />\n      </div>\n    </>\n  );\n};\n\nexport default FabricationIndex;\n"],"names":["TextArea","Input","Step","Steps","steps","id","title","content","subtitle","percent","value","SingleFabJobInListModule","order","getOrderByIdandSetdata","React","item","fabricationStatus","getCurrentFabIdOutofOrder","current","setCurrent","fabricationInfo","setFabricationInfo","updateFabStatus","payload","updateOrderForFabrication","then","size","map","description","icon","LoadingOutlined","StepContent","TextAreaContainer","TextAreaNew","autoSize","minRows","maxRows","showCount","maxLength","rows","onChange","event","target","StepAction","length","type","onClick","style","width","message","margin","danger","styled","Search","columns","dataIndex","key","render","currentRowValue","currentColumnValue","index","status","fabricationStatusIndicator","useState","data","setData","orderId","searchParams","setSearchParams","loadingStatus","setLoadingState","getOrdersById","response","finally","setTimeout","useEffect","display","flexDirection","minWidth","maxWidth","marginBottom","alignSelf","marginRight","enterButton","allowClear","loading","onSearch","rowKey","rowClassName","record","expandable","expandedRowRender","dataSource"],"sourceRoot":""}